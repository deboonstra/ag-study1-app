---
title: "Surveillance of Iowa's Agricultural Injuries Application User guide"
author: "University of Iowa Great Plains Center for Agricultural Health"
date: 'v0.1'
output: html_fragment
---

# Introduction
When the web application is launched from *paper title* (make the title a hyper-reference to paper), one will be initially directed to a couple of user guides. The first guide, titled *Application User Guide* which is this current page, provides a quick overview of the modeling framework and a detailed description of the application's inner workings. To see a more detailed description of the model construction and the calculations of the predicted probabilities, navigate to the *Detailed Overview of Modeling Framework* under the `User Guides` tab. The tab labeled `Predicted Probabilities` loads an *R Studio* Shiny application that calculates probabilities of being in Iowa's Workers' Compensation database and Iowa's Trauma Registry. This guide's remaining information details how the predicted probabilities application works. First, a quick overview of the model used to calculate the probabilities is provided to enhance the understanding of the application basics.

# Model overview
We developed a logistic regression to probabilistically predict which data source captured an injured person, given their injury characteristics and demographics. The predictive model used explanatory variables found in both data sources: age, gender, injury cause, and injury nature, and modeled the event that an injured person’s information was recorded in the Workers’ Compensation data. For categorical predictors (gender, injury cause, and injury nature), we used effects coding instead of reference coding so that the average effect would be zero.

# Application launch
The `Predicted Probabilities` tab launches the application to calculate probabilities of being in Iowa's Workers' Compensation database and Trauma Registry. The application has two panels. The left panel receives the input from the user, while the right panel displays the results based on the information given. For this application, predicted probabilities are calculated based on sex, age, and cause and nature of the injury. The starting values for sex and cause and nature of the injury are *Average of effect*. This value is a by-product of effects coding in the modeling framework, allowing probabilities to be calculated while averaging all the possible values for the predictors. So, at any time, if one wants to obtain a probability or a set of probabilities while considering a categorical variable's average effect, then select the *Average of effect* option for the variable of interest. Initially, a person's age isn't included in the probability calculation. 

# Application Useage

## User inputs
The left panel of the application takes a select set of inputs from the user. There is a drop-down menu of all possible choices for the categorical variables (sex, cause of injury, and nature of injury). For example, suppose one is interested in finding the predicted probability that a male who fell and fractured his arm is in the workers' compensation database. Then, all one would need to do is select *Male* in the **Sex** drop-down menu, *Falls* in the **Cause of Injury** drop-down menu, and *Fractures/dislocation/sprains/strains* in the **Nature of Injury** drop-down menu. Age is the only quantitative variable in the model and application. For specifying age, there are two age sliders titled **Minimum** and **Maximum Age** and a checkbox denoting whether age should be included in the probability calculation. If age is of interest, then there are several points to consider. First, the *Include age in calculation of predicted probabilities* checkbox must be selected. Second, the minimum and maximum age must be set to some value within the range of possible ages. By default, the minimum and maximum ages are set to 45, the mean and median age of the combined data sources. Suppose the two age sliders are assigned to different values, and the checkbox indicating whether multiple predicted probabilities should be calculated isn't marked. In that case, the age used is the average of the minimum and maximum age selected. Next, to obtain a range of predicted probabilities over various ages, the *Calculate multiple predicted probabilities* checkbox must be selected, and the minimum and maximum ages must differ. The application will flip the two ages assigned in the background if the minimum age exceeds the maximum. Combining all the above steps for specifying injury characteristics and demographics will provide predicted probabilities specific to those characteristics of interest. 

## Results
Regardless of the injury characteristics and demographics specified in the user input panel, the results section (right panel) will have the same general setup. There will be columns denoting the data source of the injury case (`Source`), sex (`Sex`), cause of injury (`Cause`), nature of injury (`Nature`), age (`Age`), predicted probability (`Probability`), and $95\%$ Wald confidence interval (`LB` and `UB`). By default, sex, age, cause, and nature of the injury will have empty fields. This occurs because the categorical variables have initial values of *Average of effect*, and age is not denoted to be included in the calculation. Probabilities for Iowa's Workers' Compensation database (`Workers' compensation`) and Trauma Registry (`Trauma registry`) are displayed for each probability calculation. As injury characteristics and demographics are defined, their associated columns in the results section will be filled in, and the probabilities (predicted and confidence interval) will be updated.


